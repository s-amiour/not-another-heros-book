{% extends "base.html" %}
<!-- stories json object present to be used -->
{% block content %}
<div class="max-w-4xl mx-auto p-8">
  
  <!-- Search feature -->
  <div class="mb-6">
    <form method="get" class="flex gap-2">
      <input type="text" name="q" placeholder="Search stories by title..." 
            value="{{ search_query }}" 
            class="flex-1 px-3 py-2 border rounded" />
      <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
        Search
      </button>
      {% if search_query %}
        <a href="{% url 'story_list' %}" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">
          Clear
        </a>
      {% endif %}
    </form>
  </div>

  <div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-bold">NAHB - Choose Your Own Adventure</h1>

    <div class="flex gap-4">
      <a href="{% url 'author_story_list' %}" 
         class="px-4 py-2 bg-[#52796F] text-[#FDFBF7] rounded hover:bg-[#354F52]">
        Go to Author Dashboard
      </a>
    </div>
  </div>

  {% if not stories %}
    <div class="text-center py-12 text-gray-500">
      No published stories available yet.
    </div>
  {% else %}

    <!-- CYOA List -->
    <div class="space-y-4">
      <!-- Dynamic -->
      {% for story in stories %}
        <div class="border rounded-lg p-6 bg-white shadow">
          <div class="flex justify-between items-start">

            <!-- Story info -->
            <div class="flex-1">
              <h2 class="text-xl font-semibold mb-2">{{ story.title }}</h2>
              <p class="text-gray-600 mb-4">{{ story.description }}</p>

            </div>

            <!-- Actions -->
            <div class="flex gap-2 ml-4">

              <!-- Resume button -->
              {% if story.has_progress %}
              <a href="{% url 'resume_story' story.id %}"
                 class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                Resume
              </a>
              {% endif %}
              
              <!-- Play / Preview -->
              <a href="{% url 'start_story' story.id %}" 
                 class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">
                Play
              </a>

              <!-- View Stats -->
              <a href="{% url 'stats_view' story.id %}" 

                 class="px-4 py-2 bg-gray-500 text-[#FDFBF7] rounded hover:bg-gray-600">

                View Statistics
              </a>

            </div>
          </div>
        </div>
      {% endfor %}
    </div>

  {% endif %}

</div>
{% endblock %}